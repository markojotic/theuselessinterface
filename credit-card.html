<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Credit Card — The Useless Interface by Marko Jotic</title>
<style>
  :root{--blue:#2841DF;--ink:#111;--muted:#666;--bg:#fff;}
  *{box-sizing:border-box}
  body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;margin:0;background:var(--bg);color:var(--ink);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px;}
  .hint{position:fixed;left:12px;top:12px;opacity:.85;font-size:14px}
  .hint a{color:var(--blue);font-weight:600;text-decoration:none}
  .wrap{max-width:820px;width:100%;border:1px solid #000;border-radius:12px;padding:28px;display:flex;flex-direction:column;gap:18px;align-items:center;background:#fff;}
  .instruction{color:#000;font-weight:600;text-align:center;font-size:14px}
  .card-wrap{width:100%;display:flex;justify-content:center;align-items:center;overflow:visible}
  .card{width:100%;height:64px;border-radius:10px;border:2px dashed #ccc;display:flex;align-items:center;justify-content:center;font-size:22px;letter-spacing:10px;background:linear-gradient(180deg,#fff,#fafafa);overflow:visible;padding:8px 18px;position:relative}
  .card .digit{width:20px;text-align:center;display:inline-block;transition:transform .18s ease}
  /* let first and last digits peek outside the dashed border */
  .card .digit:first-of-type{margin-left:-22px}
  .card .digit:last-of-type{margin-right:-22px}
  .question{font-size:18px;text-align:center;margin-top:8px}
  .controls{display:flex;gap:12px;margin-top:8px}
  button{background:var(--blue);color:#fff;border:none;padding:10px 18px;border-radius:8px;font-weight:700;cursor:pointer}
  button.secondary{background:#f0f0f0;color:#111;border:1px solid #ddd}
  .meta{font-size:13px;color:var(--muted);text-align:center}
  /* visually reduced footer removed per request */
</style>
</head>
<body>
  <div class="hint">Find more at <a href="https://theuselessinterface.com" target="_blank" rel="noopener">The Useless Interface</a></div>

  <div class="wrap" role="application" aria-label="Card Q&A demo">
    <div class="instruction">Enter your fake card number:</div>

    <div class="card-wrap">
      <div class="card" id="card" aria-hidden="false"></div>
    </div>

    <div class="question" id="question"></div>

    <div class="controls" id="controls">
      <button id="yesBtn">Yes</button>
      <button id="noBtn" class="secondary">No</button>
      <button id="restartBtn" class="secondary">Restart</button>
    </div>

    <div class="meta" id="meta">Answer Yes to accept a digit for the current position, or No to try a different digit.</div>
  </div>

<script>
(function(){
  // --- Configuration ---
  const length = 16; // fake card length
  // --- State ---
  let secret = '';      // locally generated fake card
  let pos = 0;          // current index to fill (0..length-1)
  let currentGuess = null; // current guessed digit for position
  let asked = {};       // map pos -> set of digits already asked to avoid repeats

  // --- Elements ---
  const cardEl = document.getElementById('card');
  const questionEl = document.getElementById('question');
  const controlsEl = document.getElementById('controls');
  const yesBtn = document.getElementById('yesBtn');
  const noBtn = document.getElementById('noBtn');
  const restartBtn = document.getElementById('restartBtn');

  // Utility: generate fake card (never leaves client)
  function generateFakeCard(len){
    let s = '';
    for(let i=0;i<len;i++){
      s += Math.floor(Math.random()*10).toString();
    }
    return s;
  }

  // Render the card with dots / filled digits
  function renderCard(filled){
    // show grouped by 4 for readability with spacing; keep overflow visible so some digits peek out
    const groups = [];
    for(let i=0;i<length;i+=4){
      let part = '';
      for(let j=0;j<4;j++){
        const idx = i+j;
        const ch = filled[idx] !== undefined ? filled[idx] : '•';
        part += '<span class="digit" data-idx="'+idx+'">'+ch+'</span>';
      }
      groups.push(part);
    }
    cardEl.innerHTML = groups.join('&nbsp;&nbsp;');
  }

  // Pick next guess for current position avoiding repeats
  function pickGuessFor(pos){
    if(!asked[pos]) asked[pos] = new Set();
    if(asked[pos].size >= 10){
      // all digits asked, reset asked set (edge case)
      asked[pos] = new Set();
    }
    const trueDigit = secret[pos];
    if(Math.random() < 0.4 && !asked[pos].has(trueDigit)){
      asked[pos].add(trueDigit);
      return trueDigit;
    }
    let d;
    const tries = [];
    for(let i=0;i<10;i++) tries.push(String(i));
    for(let i = tries.length -1; i>0; i--){
      const j = Math.floor(Math.random()*(i+1));
      [tries[i], tries[j]] = [tries[j], tries[i]];
    }
    for(const cand of tries){
      if(!asked[pos].has(cand)){
        asked[pos].add(cand);
        d = cand;
        break;
      }
    }
    return d !== undefined ? d : String(Math.floor(Math.random()*10));
  }

  // Update question UI for current guess
  function askGuess(d){
    currentGuess = d;
    questionEl.innerHTML = `Is the ${ordinal(pos+1)} digit of the card <strong>${d}</strong>?`;
  }

  // Handle user answer
  const filled = Array(length).fill(undefined);
  function handleAnswer(isYes){
    if(isYes){
      // Accept currentGuess into filled at pos
      filled[pos] = currentGuess;
      // small animation: briefly scale the digit
      renderCard(filled);
      const span = cardEl.querySelector('.digit[data-idx="'+pos+'"]');
      if(span){
        span.style.transform = 'scale(1.15)';
        setTimeout(()=>{ span.style.transform = ''; }, 180);
      }
      pos++;
      if(pos >= length){
        questionEl.innerHTML = 'All digits filled.';
        // show restart and restore other buttons handled by startDemo
        yesBtn.style.display = 'none';
        noBtn.style.display = 'none';
        return;
      }
      // ask next digit
      const g = pickGuessFor(pos);
      setTimeout(()=>askGuess(g), 300);
    } else {
      // pick another guess for same pos
      const g = pickGuessFor(pos);
      setTimeout(()=>askGuess(g), 200);
    }
  }

  // Start the demo immediately on load
  function startDemo(){
    secret = generateFakeCard(length);
    pos = 0;
    currentGuess = null;
    for(let k in asked) delete asked[k];
    for(let i=0;i<length;i++) filled[i]=undefined;
    // restore Yes/No buttons in case they were hidden
    yesBtn.style.display = '';
    noBtn.style.display = '';
    renderCard(filled);
    // start asking right away
    setTimeout(()=>{
      const g = pickGuessFor(pos);
      askGuess(g);
    }, 200);
  }

  // Helpers
  function ordinal(n){
    if(n%10===1 && n%100!==11) return n+'st';
    if(n%10===2 && n%100!==12) return n+'nd';
    if(n%10===3 && n%100!==13) return n+'rd';
    return n+'th';
  }

  // Wire buttons
  yesBtn.addEventListener('click', ()=>handleAnswer(true));
  noBtn.addEventListener('click', ()=>handleAnswer(false));
  restartBtn.addEventListener('click', startDemo);

  // initial render: empty card and auto-start
  renderCard(Array(length).fill(undefined));
  startDemo();

})();
</script>
</body>
</html>
